function displayDonationTier(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#donationTierList").html(request.responseText);$(document).ready(function(){$("#donationTierTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertDonationTier(data){const requestType="insert";const donationTierName=$("#input-name").val();const donationTierDescription=$("#input-description").val();const donationTierPrice=$("#input-price").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/palier-donation"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&donationTierName=${donationTierName}&donationTierDescription=${donationTierDescription}&donationTierPrice=${donationTierPrice}`;request.send(body)}function updateDonationTier(){const requestType="update";const donationTierId=$("#input-id").val();const donationTierName=$("#input-name").val();const donationTierDescription=$("#input-description").val();const donationTierPrice=$("#input-price").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayDonationTier();closeForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&donationTierId=${donationTierId}&donationTierName=${donationTierName}&donationTierDescription=${donationTierDescription}&donationTierPrice=${donationTierPrice}`;request.send(body)}function deleteDonationTier(){const requestType="delete";let donationTierList=$(".idDonationTier");let donationTierNameList=[];let donationTierIdList=[];for(let i=0;i<donationTierList.length;i++){if(donationTierList[i].checked){donationTierIdList.push(donationTierList[i].name);donationTierNameList.push($("#"+donationTierList[i].name).html())}}if(donationTierNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) palier(s) de donation : ${donationTierNameList.join(", ")} ?`)){const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayDonationTier()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&donationTierIdList=${donationTierIdList}`;request.send(body)}}else{alert("Veuillez sélectionner au minimum un palier à supprimer.")}}function openDonationForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log(request.responseText);$("#ctnDonationTierForm").html(request.responseText);$("#ctnDonationTierForm").css("width","100%");$("#ctnDonationTierForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&donationTierId=${id}`;request.send(body)}function closeDonationForm(){$("#ctnDonationTierForm").html("");$("#ctnDonationTierForm").css("width","0");$("#ctnDonationTierForm").css("height","0")}function displayPage(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/page-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#pageList").html(request.responseText);$(document).ready(function(){$("#pageTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertPage(data){const requestType="insert";const pageUri=$("#input-uri").val();const pageDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/page-creation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/page-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&pageUri=${pageUri}&pageDescription=${pageDescription}`;request.send(body)}function updatePage(pageId,data){const requestType="update";const pageUri=$("#input-uri").val();const pageDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/page-creation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/page-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&pageId=${pageId}&data=${data}&pageUri=${pageUri}&pageDescription=${pageDescription}`;request.send(body)}function deletePage(){const requestType="delete";let pageList=$(".idPage");let pageUriList=[];let pageIdList=[];for(let i=0;i<pageList.length;i++){if(pageList[i].checked){pageIdList.push(pageList[i].name);pageUriList.push($("#"+pageList[i].name).html())}}if(pageUriList.length>0){if(confirm("Etes-vous sûr de vouloir supprimer la ou les pages : "+pageUriList.join(", ")+" ?")){const request=new XMLHttpRequest;request.open("POST","/page-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayPage()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&pageIdList=${pageIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum une page à supprimer.")}}function displayRole(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#roleList").html(request.responseText);$(document).ready(function(){$("#roleTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertRole(){const requestType="insert";const roleName=$("#input-name").val();const roleDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();let actionList=[];let permissionList=$(".input-permission");for(let i=0;i<permissionList.length;i++){if(permissionList[i].checked)actionList.push(permissionList[i].name)}const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayRole();closeRoleForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&roleName=${roleName}&roleDescription=${roleDescription}&actionList=${actionList}`;request.send(body)}function updateRole(){const requestType="update";const roleId=$("#input-id").val();const roleName=$("#input-name").val();const roleDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();let actionList=[];let permissionList=$(".input-permission");for(let i=0;i<permissionList.length;i++){if(permissionList[i].checked)actionList.push(permissionList[i].name)}const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayRole();closeRoleForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&roleId=${roleId}&roleName=${roleName}&roleDescription=${roleDescription}&actionList=${actionList}`;request.send(body)}function deleteRole(){const requestType="delete";let roleList=$(".idRole");let roleNameList=[];let roleIdList=[];for(let i=0;i<roleList.length;i++){if(roleList[i].checked){roleIdList.push(roleList[i].name);roleNameList.push($("#"+roleList[i].name).html())}}if(roleNameList.length>0){if(confirm("Etes-vous sûr de vouloir supprimer le(s) rôle(s) : "+roleNameList.join(", ")+" ?")){const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayRole()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&roleIdList=${roleIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un rôle à supprimer.")}}function openRoleForm(id=""){const requestType="openForm";let ctnRoleForm=$("#ctnRoleForm");const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{ctnRoleForm.html(request.responseText);ctnRoleForm.css("width","100%");ctnRoleForm.css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&roleId=${id}`;request.send(body)}function closeRoleForm(){let ctnRoleForm=$("#ctnRoleForm");ctnRoleForm.html("");ctnRoleForm.css("width","0");ctnRoleForm.css("height","0")}function checkAll(self){$(".idRole").prop("checked",$(self).prop("checked"))}function displayUser(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#userList").html(request.responseText);$(document).ready(function(){$("#userManagementTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function updateUser(){let formData=new FormData;formData.append("requestType","update");formData.append("userId",$("#input-id").val());formData.append("userLastname",$("#input-lastname").val());formData.append("userFirstname",$("#input-firstname").val());formData.append("userEmail",$("#input-email").val());formData.append("avatar",$("#input-avatar")[0].files[0]);formData.append("userIdRole",$("#input-idRole").val());formData.append("tokenForm",$("#tokenForm").val());const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayUser();closeUserForm();console.log(request.responseText)}}};request.send(formData)}function deleteUser(){const requestType="delete";let userList=$(".idUser");let userNameList=[];let userIdList=[];for(let i=0;i<userList.length;i++){if(userList[i].checked){userIdList.push(userList[i].name);userNameList.push($("#"+userList[i].name).html())}}if(userNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) utilisateur(s) : ${userNameList.join(", ")} ?`)){const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayUser()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&userIdList=${userIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un utilisateur à supprimer.")}}function openUserForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log("AJAX : request open form completed");$("#ctnUserForm").html(request.responseText);$("#ctnUserForm").css("width","100%");$("#ctnUserForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&userId=${id}`;request.send(body)}function closeUserForm(){$("#ctnUserForm").html("");$("#ctnUserForm").css("width","0");$("#ctnUserForm").css("height","0")}function checkSelf(div){let allInput=document.getElementsByClassName("donationTier");for(let i=0;i<allInput.length;i++){allInput[i].checked=false}removeAllCheckedClass();$(div).find("input").prop("checked",true);$(div).addClass("checked")}function removeAllCheckedClass(){let allDiv=document.getElementsByClassName("checked");$(allDiv).each(function(){$(this).removeClass("checked")})}$("#cards").ready(removeAllCheckedClass);$(document).on("click",".show-password",function(){$("#password").attr("type","text");$(this).addClass("hide");$(".hide-password").removeClass("hide")});$(document).on("click",".show-confirmPassword",function(){$("#confirmPassword").attr("type","text");$(this).addClass("hide");$(".hide-confirmPassword").removeClass("hide")});$(document).on("click",".hide-password",function(){$("#password").attr("type","password");$(this).addClass("hide");$(".show-password").removeClass("hide")});$(document).on("click",".hide-confirmPassword",function(){$("#confirmPassword").attr("type","password");$(this).addClass("hide");$(".show-confirmPassword").removeClass("hide")});$(document).on("click","#trigger-nav",function(){let nav=$("#nav");if(nav.hasClass("nav-close")){nav.removeClass("nav-close")}else{nav.addClass("nav-close")}});$(document).on("click",".nav-section",function(){let open=false;if($(this).hasClass("close")){open=true}closeAllNavSection();if($(this).hasClass("close")&&open){$(this).removeClass("close")}});function closeAllNavSection(){$(".nav-section").addClass("close")}function removeAllOpenedBtn(){$(".btn").removeClass("opened")}function search(searchString){const requestType="search";const request=new XMLHttpRequest;request.open("POST","/search");request.onreadystatechange=function(){if(request.readyState===4){$("#searchResultContainer").html(request.responseText);console.log(request.responseText)}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&searchString=${searchString}`;request.send(body)}function delay(fn,ms){let timer=0;return function(...args){clearTimeout(timer);timer=setTimeout(fn.bind(this,...args),ms||0)}}