function displayMessage(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/message-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#messageList").html(request.responseText);$(document).ready(function(){$("#messageManagementTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertMessage(data){const requestType="insert";const messageIdUser=$("#input-idUser").val();const messageIdForum=$("#input-idForum").val();const messageIdMessage=$("#input-idMessage").val();const messageContent=$("#input-content").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/message-management");request.onreadystatechange=function(){if(request.readyState===4){console.log(request.responseText);if(request.responseText==="login")window.location.href="/login";else window.location.href="/message-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&messageIdUser=${messageIdUser}&messageIdForum=${messageIdForum}&messageIdMessage=${messageIdMessage}&messageContent=${messageContent}`;request.send(body)}function updateMessage(){const requestType="update";const messageId=$("#input-id").val();const messageIdUser=$("#input-idUser").val();const messageIdForum=$("#input-idForum").val();const messageIdMessage=$("#input-idMessage").val();const messageContent=$("#input-content").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/message-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayMessage();closeMessageForm();console.log(request.responseText)}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&messageId=${messageId}&messageIdUser=${messageIdUser}&messageIdForum=${messageIdForum}&messageIdMessage=${messageIdMessage}&messageContent=${messageContent}`;request.send(body)}function deleteMessage(){const requestType="delete";let messageList=$(".idMessage");let messageNameList=[];let messageIdList=[];for(let i=0;i<messageList.length;i++){if(messageList[i].checked){messageIdList.push(messageList[i].name);messageNameList.push($("#"+messageList[i].name)[0].name)}}if(messageNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) message(s) : ${messageNameList.join(", ")} ainsi que toutes ses dépendances ?`)){const request=new XMLHttpRequest;request.open("POST","/message-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayMessage()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&messageIdList=${messageIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un message à supprimer.")}}function openMessageForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/message-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log("AJAX : request open form completed");$("#ctnMessageForm").html(request.responseText);$("#ctnMessageForm").css("width","100%");$("#ctnMessageForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&messageId=${id}`;request.send(body)}function closeMessageForm(){$("#ctnMessageForm").html("");$("#ctnMessageForm").css("width","0");$("#ctnMessageForm").css("height","0")}function displayForum(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/forum-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#forumList").html(request.responseText);$(document).ready(function(){$("#forumManagementTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertForum(data){const requestType="insert";const forumTitle=$("#input-title").val();const forumContent=$("#input-content").val();const forumIdUser=$("#input-idUser").val();const forumIdTag=$("#input-idTag").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/forum-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/forum-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&forumTitle=${forumTitle}&forumContent=${forumContent}&forumIdUser=${forumIdUser}&forumIdTag=${forumIdTag}`;request.send(body)}function updateForum(){const requestType="update";const forumId=$("#input-id").val();const forumTitle=$("#input-title").val();const forumContent=$("#input-content").val();const forumIdUser=$("#input-idUser").val();const forumIdTag=$("#input-idTag").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/forum-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayForum();closeForumForm();console.log(request.responseText)}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&forumId=${forumId}&forumTitle=${forumTitle}&forumContent=${forumContent}&forumIdUser=${forumIdUser}&forumIdTag=${forumIdTag}`;request.send(body)}function deleteForum(){const requestType="delete";let forumList=$(".idForum");let forumNameList=[];let forumIdList=[];for(let i=0;i<forumList.length;i++){if(forumList[i].checked){forumIdList.push(forumList[i].name);forumNameList.push($("#"+forumList[i].name).html())}}if(forumNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) forum(s) : ${forumNameList.join(", ")} ainsi que toutes ses dépendances?`)){const request=new XMLHttpRequest;request.open("POST","/forum-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayForum()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&forumIdList=${forumIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un message à supprimer.")}}function openForumForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/forum-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log("AJAX : request open form completed");$("#ctnForumForm").html(request.responseText);$("#ctnForumForm").css("width","100%");$("#ctnForumForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&forumId=${id}`;request.send(body)}function closeForumForm(){$("#ctnForumForm").html("");$("#ctnForumForm").css("width","0");$("#ctnForumForm").css("height","0")}function displayForumFront(idForum){const requestType="displayForumFront";const request=new XMLHttpRequest;request.open("POST","/forum?forum="+idForum);request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else $("#containerForumFront").html(request.responseText)}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body);return true}function openForumFormFront(id=""){const requestType="openFormFront";const request=new XMLHttpRequest;request.open("POST","/forum-list");request.onreadystatechange=function(){if(request.readyState===4){$("#ctnForumFormFront").html(request.responseText);$("#ctnForumFormFront").css("width","100%");$("#ctnForumFormFront").css("height","100%");$("#input-title").focus();console.log("AJAX : request open form completed")}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&forumId=${id}`;request.send(body)}function insertForumFront(data){const requestType="insertForumFront";const forumTitle=$("#input-title").val();const forumContent=$("#input-content").val();const forumIdUser=$("#input-idUser").val();const forumIdTag=$("#input-idTag").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/forum-list");request.onreadystatechange=function(){if(request.readyState===4){window.location.href="/forum-list"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&forumTitle=${forumTitle}&forumContent=${forumContent}&forumIdUser=${forumIdUser}&forumIdTag=${forumIdTag}`;request.send(body)}function insertMessageFront(idForum,idMessage){const requestType="insertMessageFront";const messageIdUser=$("#input-idUser"+idMessage).val();const messageIdForum=$("#input-idForum"+idMessage).val();const messageIdMessage=$("#input-idMessage"+idMessage).val();const messageContent=$("#input-content"+idMessage).val();const tokenForm=$("#tokenForm"+idMessage).val();const request=new XMLHttpRequest;request.open("POST","/forum?forum="+idForum);request.onreadystatechange=function(){if(request.readyState===4){closeMessageForm();displayForumFront(idForum)}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&messageIdUser=${messageIdUser}&messageIdForum=${messageIdForum}&messageIdMessage=${messageIdMessage}&messageContent=${messageContent}`;request.send(body)}function insertAnAnswer(idForum,idMessage){let imgWarning=document.getElementById("imgWarning"+idMessage);if($("#divInsertAnswer"+idMessage).hasClass("hidden")){$("#divInsertAnswer"+idMessage).removeClass("hidden");imgWarning.style.bottom="85px";$("#input-content"+idMessage).focus()}else{$("#divInsertAnswer"+idMessage).addClass("hidden");imgWarning.style.bottom="5px"}}function deleteMessageFront(idForum,idMessage){const requestType="deleteMessageFront";if(confirm(`Êtes-vous sûr de vouloir supprimer ce message ainsi que toutes ses réponses s'il y en a ?`)){const request=new XMLHttpRequest;request.open("POST","/forum?forum="+idForum);request.onreadystatechange=function(){if(request.readyState===4){displayForumFront(idForum);console.log("AJAX : request delete message completed")}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&idMessage=${idMessage}`;request.send(body)}}function openForumFrontForm(idForum){const requestType="openForumFrontForm";const request=new XMLHttpRequest;request.open("POST","/forum?forum="+idForum);request.onreadystatechange=function(){if(request.readyState===4){$("#ctnForumFrontForm").html(request.responseText);$("#ctnForumFrontForm").css("width","100%");$("#ctnForumFrontForm").css("height","100%");$("#input-content0").focus();console.log("AJAX : request open form completed")}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&forumId=${idForum}`;request.send(body);return true}function closeMessageForm(){$("#ctnForumFrontForm").html("");$("#ctnForumFrontForm").css("width","0");$("#ctnForumFrontForm").css("height","0")}function closeForumForm(){$("#ctnForumFormFront").html("");$("#ctnForumFormFront").css("width","0");$("#ctnForumFormFront").css("height","0")}function displayDonationTier(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#donationTierList").html(request.responseText);$(document).ready(function(){$("#donationTierTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertDonationTier(data){const requestType="insert";const donationTierName=$("#input-name").val();const donationTierDescription=$("#input-description").val();const donationTierPrice=$("#input-price").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/palier-donation"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&donationTierName=${donationTierName}&donationTierDescription=${donationTierDescription}&donationTierPrice=${donationTierPrice}`;request.send(body)}function updateDonationTier(){const requestType="update";const donationTierId=$("#input-id").val();const donationTierName=$("#input-name").val();const donationTierDescription=$("#input-description").val();const donationTierPrice=$("#input-price").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayDonationTier();closeForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&donationTierId=${donationTierId}&donationTierName=${donationTierName}&donationTierDescription=${donationTierDescription}&donationTierPrice=${donationTierPrice}`;request.send(body)}function deleteDonationTier(){const requestType="delete";let donationTierList=$(".idDonationTier");let donationTierNameList=[];let donationTierIdList=[];for(let i=0;i<donationTierList.length;i++){if(donationTierList[i].checked){donationTierIdList.push(donationTierList[i].name);donationTierNameList.push($("#"+donationTierList[i].name).html())}}if(donationTierNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) palier(s) de donation : ${donationTierNameList.join(", ")} ?`)){const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayDonationTier()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&donationTierIdList=${donationTierIdList}`;request.send(body)}}else{alert("Veuillez sélectionner au minimum un palier à supprimer.")}}function openDonationForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/palier-donation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log(request.responseText);$("#ctnDonationTierForm").html(request.responseText);$("#ctnDonationTierForm").css("width","100%");$("#ctnDonationTierForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&donationTierId=${id}`;request.send(body)}function closeDonationForm(){$("#ctnDonationTierForm").html("");$("#ctnDonationTierForm").css("width","0");$("#ctnDonationTierForm").css("height","0")}function displayPage(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/page-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#pageList").html(request.responseText);$(document).ready(function(){$("#pageTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertPage(data){const requestType="insert";const pageUri=$("#input-uri").val();const pageDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/page-creation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else if(request.responseText==="success")window.location.href="/page-management";else if(request.responseText==="error")displayNotification()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&data=${data}&pageUri=${pageUri}&pageDescription=${pageDescription}`;request.send(body)}function updatePage(pageId,data){const requestType="update";const pageUri=$("#input-uri").val();const pageDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/page-creation");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else if(request.responseText==="success")window.location.href="/page-management";else if(request.responseText==="error")displayNotification()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&pageId=${pageId}&data=${data}&pageUri=${pageUri}&pageDescription=${pageDescription}`;request.send(body)}function deletePage(){const requestType="delete";let pageList=$(".idPage");let pageUriList=[];let pageIdList=[];for(let i=0;i<pageList.length;i++){if(pageList[i].checked){pageIdList.push(pageList[i].name);pageUriList.push($("#"+pageList[i].name).html())}}if(pageUriList.length>0){if(confirm("Etes-vous sûr de vouloir supprimer la ou les pages : "+pageUriList.join(", ")+" ?")){const request=new XMLHttpRequest;request.open("POST","/page-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayPage()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&pageIdList=${pageIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum une page à supprimer.")}}function displayRole(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#roleList").html(request.responseText);$(document).ready(function(){$("#roleTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertRole(){const requestType="insert";const roleName=$("#input-name").val();const roleDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();let actionList=[];let permissionList=$(".input-permission");for(let i=0;i<permissionList.length;i++){if(permissionList[i].checked)actionList.push(permissionList[i].name)}const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayRole();closeRoleForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&roleName=${roleName}&roleDescription=${roleDescription}&actionList=${actionList}`;request.send(body)}function updateRole(){const requestType="update";const roleId=$("#input-id").val();const roleName=$("#input-name").val();const roleDescription=$("#input-description").val();const tokenForm=$("#tokenForm").val();let actionList=[];let permissionList=$(".input-permission");for(let i=0;i<permissionList.length;i++){if(permissionList[i].checked)actionList.push(permissionList[i].name)}const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayRole();closeRoleForm()}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&roleId=${roleId}&roleName=${roleName}&roleDescription=${roleDescription}&actionList=${actionList}`;request.send(body)}function deleteRole(){const requestType="delete";let roleList=$(".idRole");let roleNameList=[];let roleIdList=[];for(let i=0;i<roleList.length;i++){if(roleList[i].checked){roleIdList.push(roleList[i].name);roleNameList.push($("#"+roleList[i].name).html())}}if(roleNameList.length>0){if(confirm("Etes-vous sûr de vouloir supprimer le(s) rôle(s) : "+roleNameList.join(", ")+" ?")){const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayRole()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&roleIdList=${roleIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un rôle à supprimer.")}}function openRoleForm(id=""){const requestType="openForm";let ctnRoleForm=$("#ctnRoleForm");const request=new XMLHttpRequest;request.open("POST","/role-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{ctnRoleForm.html(request.responseText);ctnRoleForm.css("width","100%");ctnRoleForm.css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&roleId=${id}`;request.send(body)}function closeRoleForm(){let ctnRoleForm=$("#ctnRoleForm");ctnRoleForm.html("");ctnRoleForm.css("width","0");ctnRoleForm.css("height","0")}function checkAll(self){$(".idRole").prop("checked",$(self).prop("checked"))}function displayUser(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#userList").html(request.responseText);$(document).ready(function(){$("#userManagementTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function updateUser(){let formData=new FormData;formData.append("requestType","update");formData.append("userId",$("#input-id").val());formData.append("userLastname",$("#input-lastname").val());formData.append("userFirstname",$("#input-firstname").val());formData.append("userEmail",$("#input-email").val());formData.append("avatar",$("#input-avatar")[0].files[0]);formData.append("userIdRole",$("#input-idRole").val());formData.append("tokenForm",$("#tokenForm").val());const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{displayUser();closeUserForm()}}};request.send(formData)}function deleteUser(){const requestType="delete";let userList=$(".idUser");let userNameList=[];let userIdList=[];for(let i=0;i<userList.length;i++){if(userList[i].checked){userIdList.push(userList[i].name);userNameList.push($("#"+userList[i].name).html())}}if(userNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) utilisateur(s) : ${userNameList.join(", ")} ?`)){const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else displayUser()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&userIdList=${userIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un utilisateur à supprimer.")}}function openUserForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{console.log("AJAX : request open form completed");$("#ctnUserForm").html(request.responseText);$("#ctnUserForm").css("width","100%");$("#ctnUserForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&userId=${id}`;request.send(body)}function displayUserAvatar(){let formData=new FormData;formData.append("requestType","displayAvatar");formData.append("avatar",$("#input-avatar")[0].files[0]);const request=new XMLHttpRequest;request.open("POST","/user-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else $("#avatar-preview").html(request.responseText)}};request.send(formData)}function closeUserForm(){$("#ctnUserForm").html("");$("#ctnUserForm").css("width","0");$("#ctnUserForm").css("height","0")}function checkSelf(div){let allInput=document.getElementsByClassName("donationTier");for(let i=0;i<allInput.length;i++){allInput[i].checked=false}removeAllCheckedClass();$(div).find("input").prop("checked",true);$(div).addClass("checked")}function removeAllCheckedClass(){let allDiv=document.getElementsByClassName("checked");$(allDiv).each(function(){$(this).removeClass("checked")})}$("#cards").ready(removeAllCheckedClass);$(document).on("click",".show-password",function(){$("#password").attr("type","text");$(this).addClass("hide");$(".hide-password").removeClass("hide")});$(document).on("click",".show-confirmPassword",function(){$("#confirmPassword").attr("type","text");$(this).addClass("hide");$(".hide-confirmPassword").removeClass("hide")});$(document).on("click",".hide-password",function(){$("#password").attr("type","password");$(this).addClass("hide");$(".show-password").removeClass("hide")});$(document).on("click",".hide-confirmPassword",function(){$("#confirmPassword").attr("type","password");$(this).addClass("hide");$(".show-confirmPassword").removeClass("hide")});function search(searchString){const requestType="search";const request=new XMLHttpRequest;request.open("POST","/search");request.onreadystatechange=function(){if(request.readyState===4){$("#searchResultContainer").html(request.responseText);console.log(request.responseText)}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&searchString=${searchString}`;request.send(body)}function delay(fn,ms){let timer=0;return function(...args){clearTimeout(timer);timer=setTimeout(fn.bind(this,...args),ms||0)}}$(document).on("click","#trigger-nav",function(){let nav=$("#nav");if(nav.hasClass("nav-close")){nav.removeClass("nav-close")}else{nav.addClass("nav-close")}});$(document).on("click",".nav-section",function(){let open=false;if($(this).hasClass("close")){open=true}closeAllNavSection();if($(this).hasClass("close")&&open){$(this).removeClass("close")}});function closeAllNavSection(){$(".nav-section").addClass("close")}function removeAllOpenedBtn(){$(".btn").removeClass("opened")}function displayWarning(){const requestType="display";const request=new XMLHttpRequest;request.open("POST","/warning-management");request.onreadystatechange=function(){if(request.readyState===4){$("#warningList").html(request.responseText);$(document).ready(function(){$("#warningManagementTable").DataTable()})}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertWarning(token,idForum,idUser,idMessage){const requestType="insertWarning";const warningIdMessage=idMessage;const warningIdUser=idUser;const warningStatus=1;const tokenForm=token;const request=new XMLHttpRequest;request.open("POST","/forum?forum="+idForum);request.onreadystatechange=function(){if(request.readyState===4){alert("Merci, votre signalement a bien enregistré.")}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&warningIdMessage=${warningIdMessage}&warningIdUser=${warningIdUser}&warningStatus=${warningStatus}`;request.send(body)}function updateWarning(){const requestType="update";const warningId=$("#input-id").val();const warningIdMessage=$("#input-idMessage").val();const warningIdUser=$("#input-idUser").val();const warningStatus=$("#input-status").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/warning-management");request.onreadystatechange=function(){if(request.readyState===4){displayWarning();closeWarningForm()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&warningId=${warningId}&warningIdUser=${warningIdUser}&warningStatus=${warningStatus}&warningIdMessage=${warningIdMessage}`;request.send(body)}function deleteWarning(){const requestType="delete";let warningList=$(".idWarning");let warningNameList=[];let warningIdList=[];for(let i=0;i<warningList.length;i++){if(warningList[i].checked){warningIdList.push(warningList[i].name);warningNameList.push($("#"+warningList[i].name)[0].name)}}if(warningNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) warning(s) : ${warningNameList.join(", ")} ?`)){const request=new XMLHttpRequest;request.open("POST","/warning-management");request.onreadystatechange=function(){if(request.readyState===4){displayWarning()}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&warningIdList=${warningIdList}`;request.send(body)}}else alert("Sélectionnez au minimum un signalement à supprimer.")}function openWarningForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/warning-management");request.onreadystatechange=function(){if(request.readyState===4){console.log("AJAX : request open form completed");$("#ctnWarningForm").html(request.responseText);$("#ctnWarningForm").css("width","100%");$("#ctnWarningForm").css("height","100%")}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&warningId=${id}`;request.send(body)}function closeWarningForm(){$("#ctnWarningForm").html("");$("#ctnWarningForm").css("width","0");$("#ctnWarningForm").css("height","0")}function loadTotalUserByCreation(users){am5.ready(function(){let root=am5.Root.new("userCreationChartDiv2");root.setThemes([am5themes_Animated.new(root)]);let chart=root.container.children.push(am5xy.XYChart.new(root,{panY:false,layout:root.verticalLayout,maxTooltipDistance:0}));let data=[{category:"Research",value1:1e3,value2:588},{category:"Marketing",value1:1200,value2:1800},{category:"Sales",value1:850,value2:1230}];let yAxis=chart.yAxes.push(am5xy.ValueAxis.new(root,{renderer:am5xy.AxisRendererY.new(root,{})}));var xAxis=chart.xAxes.push(am5xy.CategoryAxis.new(root,{maxDeviation:.2,renderer:am5xy.AxisRendererX.new(root,{}),categoryField:"category"}));xAxis.data.setAll(data);var series1=chart.series.push(am5xy.ColumnSeries.new(root,{name:"Series",xAxis:xAxis,yAxis:yAxis,valueYField:"value1",categoryXField:"category",tooltip:am5.Tooltip.new(root,{})}));series1.data.setAll(data);var series2=chart.series.push(am5xy.ColumnSeries.new(root,{name:"Series",xAxis:xAxis,yAxis:yAxis,valueYField:"value2",categoryXField:"category"}));series2.data.setAll(data);var legend=chart.children.push(am5.Legend.new(root,{}));legend.data.setAll(chart.series.values)})}function loadUserByCreation(users){am5.ready(function(){let root=am5.Root.new("userCreationChartDiv");root.setThemes([am5themes_Animated.new(root)]);let chart=root.container.children.push(am5xy.XYChart.new(root,{panY:false,layout:root.verticalLayout,maxTooltipDistance:0}));chart.children.unshift(am5.Label.new(root,{text:"Evolution du nombre d'utilisateurs inscrits",fontSize:25,fontWeight:"400",textAlign:"center",x:am5.percent(50),centerX:am5.percent(50),paddingTop:0,paddingBottom:20}));let data=[];for(let i=0;i<users.length;i++){let creationDate=new Date(users[i].creationDate);data.push({date:creationDate.getTime(),value:i})}console.log(data);let yAxis=chart.yAxes.push(am5xy.ValueAxis.new(root,{extraTooltipPrecision:1,renderer:am5xy.AxisRendererY.new(root,{})}));let xAxis=chart.xAxes.push(am5xy.DateAxis.new(root,{baseInterval:{timeUnit:"day",count:1},renderer:am5xy.AxisRendererX.new(root,{})}));xAxis.get("dateFormats")["day"]="dd/MM";xAxis.get("periodChangeDateFormats")["day"]="MMMM";function createSeries(name,field){let series=chart.series.push(am5xy.LineSeries.new(root,{name:name,xAxis:xAxis,yAxis:yAxis,valueYField:field,valueXField:"date",tooltip:am5.Tooltip.new(root,{})}));series.bullets.push(function(){return am5.Bullet.new(root,{sprite:am5.Circle.new(root,{radius:5,fill:series.get("fill")})})});series.strokes.template.set("strokeWidth",2);series.get("tooltip").label.set("text","[bold]{name}[/]\n{valueX.formatDate()}: {valueY}");series.data.setAll(data)}createSeries("Series","value");chart.set("cursor",am5xy.XYCursor.new(root,{behavior:"zoomXY",xAxis:xAxis}));xAxis.set("tooltip",am5.Tooltip.new(root,{themeTags:["axis"]}));yAxis.set("tooltip",am5.Tooltip.new(root,{themeTags:["axis"]}));var legend=chart.children.push(am5.Legend.new(root,{}));legend.data.setAll(chart.series.values)})}function loadStatistics(){am5.ready(function(){let root=am5.Root.new("userCreationChartDiv");root.setThemes([am5themes_Animated.new(root)]);let chart=root.container.children.push(am5xy.XYChart.new(root,{panX:true,panY:true,wheelX:"panX",wheelY:"zoomX",pinchZoomX:true}));let cursor=chart.set("cursor",am5xy.XYCursor.new(root,{behavior:"none"}));cursor.lineY.set("visible",false);let date=new Date;date.setHours(0,0,0,0);let value=100;function generateData(){value=Math.round(Math.random()*10-5+value);am5.time.add(date,"day",1);return{date:date.getTime(),value:value}}function generateDatas(count){let data=[];for(let i=0;i<count;++i){data.push(generateData())}return data}let xAxis=chart.xAxes.push(am5xy.DateAxis.new(root,{maxDeviation:.5,baseInterval:{timeUnit:"day",count:1},renderer:am5xy.AxisRendererX.new(root,{pan:"zoom"}),tooltip:am5.Tooltip.new(root,{})}));let yAxis=chart.yAxes.push(am5xy.ValueAxis.new(root,{maxDeviation:1,renderer:am5xy.AxisRendererY.new(root,{pan:"zoom"})}));let series=chart.series.push(am5xy.SmoothedXLineSeries.new(root,{name:"Series",xAxis:xAxis,yAxis:yAxis,valueYField:"value",valueXField:"date",tooltip:am5.Tooltip.new(root,{labelText:"{valueY}"})}));series.fills.template.setAll({visible:true,fillOpacity:.2});series.bullets.push(function(){return am5.Bullet.new(root,{locationY:0,sprite:am5.Circle.new(root,{radius:4,stroke:root.interfaceColors.get("background"),strokeWidth:2,fill:series.get("fill")})})});chart.set("scrollbarX",am5.Scrollbar.new(root,{orientation:"horizontal"}));let data=generateDatas(50);series.data.setAll(data);series.appear(1e3);chart.appear(1e3,100)})}function displayBanWord(){console.log("test");const requestType="display";const request=new XMLHttpRequest;request.open("POST","/ban-word-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#banWordList").html(request.responseText);$(document).ready(function(){$("#banWordTable").DataTable()})}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}`;request.send(body)}function insertBanWord(){const requestType="insert";const banWordIdMessage=$("#input-message").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/ban-word-management");request.onreadystatechange=function(){if(request.readyState===4){console.log(request.responseText);if(request.responseText==="login")window.location.href="/login";else window.location.href="/ban-word-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&banWord=${banWordIdMessage}`;request.send(body)}function updateBanWord(){const requestType="update";const banWordId=$("#input-id").val();const banWord=$("#input-message").val();const tokenForm=$("#tokenForm").val();const request=new XMLHttpRequest;request.open("POST","/ban-word-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{window.location.href="/ban-word-management"}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&tokenForm=${tokenForm}&banWordId=${banWordId}&banWord=${banWord}`;request.send(body)}function deleteBanWord(){const requestType="delete";let banWordList=$(".idBanWord");let banWordNameList=[];let banWordIdList=[];for(let i=0;i<banWordList.length;i++){if(banWordList[i].checked){banWordIdList.push(banWordList[i].name);banWordNameList.push($("#"+banWordList[i].name)[0].name)}}if(banWordNameList.length>0){if(confirm(`Êtes-vous sûr de vouloir supprimer le(s) mot(s) : ${banWordNameList.join(", ")} ainsi que toutes ses dépendances ?`)){const request=new XMLHttpRequest;request.open("POST","/ban-word-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else window.location.href="/ban-word-management"}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&banWordIdList=${banWordIdList}`;request.send(body)}}else{alert("Sélectionnez au minimum un mot à supprimer.")}}function openBanWordForm(id=""){const requestType="openForm";const request=new XMLHttpRequest;request.open("POST","/ban-word-management");request.onreadystatechange=function(){if(request.readyState===4){if(request.responseText==="login")window.location.href="/login";else{$("#ctnMessageForm").html(request.responseText);$("#ctnMessageForm").css("width","100%");$("#ctnMessageForm").css("height","100%")}}};request.setRequestHeader("Content-Type","application/x-www-form-urlencoded");const body=`requestType=${requestType}&banWordId=${id}`;request.send(body)}